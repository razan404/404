<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Matcher Pro</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #f0f2f5;
            padding-top: 50px;
        }

        .container {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }

        .box {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .image-wrapper {
            position: relative;
            width: 200px;
            height: 200px;
            margin-bottom: 15px;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
        }

        .image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .color-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            mix-blend-mode: multiply;
            pointer-events: none;
        }

        /* Button and Result Styling */
        .controls {
            text-align: center;
        }

        button {
            padding: 12px 25px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        #result {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        input[type="color"] {
            width: 100px;
            height: 40px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="box">
        <h3>Shirt</h3>
        <div class="image-wrapper">
            <img src="shirt.png" alt="Shirt">
            <div id="shirt-layer" class="color-overlay"></div>
        </div>
        <input type="color" id="shirt-picker" value="#ffffff" oninput="updateColor('shirt-layer', this.value)">
    </div>

    <div class="box">
        <h3>Pant</h3>
        <div class="image-wrapper">
            <img src="pant.png" alt="Pant">
            <div id="pant-layer" class="color-overlay"></div>
        </div>
        <input type="color" id="pant-picker" value="#ffffff" oninput="updateColor('pant-layer', this.value)">
    </div>
</div>

<div class="controls">
    <button onclick="calculateMatch()">Check Match Percentage</button>
    <div id="result">Match: --%</div>
</div>

<script>
    // Update the visual overlay
    function updateColor(layerId, color) {
        document.getElementById(layerId).style.backgroundColor = color;
    }

    // Helper to convert Hex to RGB
    function hexToRgb(hex) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return { r, g, b };
    }

    // Main calculation logic
    function calculateMatch() {
        const shirtHex = document.getElementById('shirt-picker').value;
        const pantHex = document.getElementById('pant-picker').value;

        const shirtRgb = hexToRgb(shirtHex);
        const pantRgb = hexToRgb(pantHex);

        // Calculate Intensity (Luminance) for both
        // Formula: 0.299*R + 0.587*G + 0.114*B
        const shirtIntensity = (0.299 * shirtRgb.r + 0.587 * shirtRgb.g + 0.114 * shirtRgb.b) / 255;
        const pantIntensity = (0.299 * pantRgb.r + 0.587 * pantRgb.g + 0.114 * pantRgb.b) / 255;

        // Find the difference in intensity
        const diff = Math.abs(shirtIntensity - pantIntensity);
        
        // Calculate percentage: 
        // 100% means intensities are identical. 
        // 0% means one is pure white and one is pure black.
        let matchPercentage = Math.round((1 - diff) * 100);

        // Display the result
        const resultDiv = document.getElementById('result');
        resultDiv.innerText = `Match: ${matchPercentage}%`;

        // Change text color based on result
        if (matchPercentage > 80) resultDiv.style.color = "green";
        else if (matchPercentage > 50) resultDiv.style.color = "orange";
        else resultDiv.style.color = "red";
    }
</script>

</body>
</html>